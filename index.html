<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конструктор и проведение видео-скрининга</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="instructionsScreen" class="screen active">
        <div class="info-screen-content">
            <h1>Добро пожаловать в конструктор видео-скрининга!</h1>
            <p style="font-size: 1.2em; line-height: 1.6;">
                Создавайте вопросы и указывайте ключевые слова для правильных ответов. 
                Затем запустите тест, разрешите доступ к камере и микрофону, и система 
                автоматически сравнит ваши голосовые ответы с ожидаемыми. Для стабильной 
                работы рекомендуется использовать браузер Chrome на компьютере.
            </p>
            <br>
            <button id="agreeAndSetupBtn">Понятно, перейти к созданию теста</button>
        </div>
    </div>

    <div id="constructorScreen" class="screen">
        <h1>Конструктор теста</h1>
        <div class="constructor-layout">
            <div class="constructor-form">
                <h3>1. Добавьте вопрос</h3>
                <div class="form-group">
                    <label for="questionInput">Текст вопроса</label>
                    <input type="text" id="questionInput" placeholder="Например: Какой у вас опыт работы с JavaScript?">
                </div>
                <div class="form-group">
                    <label for="correctAnswerInput">Ожидаемый ключевой ответ</label>
                    <input type="text" id="correctAnswerInput" placeholder="Например: 5 лет, React, да">
                </div>
                <button id="addQuestionBtn">Добавить вопрос</button>

                <h3 style="margin-top: 30px;">2. Настройте критерии</h3>
                <div class="form-group">
                    <label for="thresholdInput">Сколько правильных ответов нужно для прохождения</label>
                    <input type="number" id="thresholdInput" value="1" min="1">
                </div>
                <div class="form-group">
                    <label>Когда сохранять запись</label>
                    <div class="radio-group">
                        <label><input type="radio" name="saveCondition" value="successful" checked> Только успешные</label>
                        <label><input type="radio" name="saveCondition" value="all"> Всегда</label>
                    </div>
                </div>
                <button id="finalizeSetupBtn">Создать тест</button>
            </div>
            <div class="constructor-preview">
                <h3>Список вопросов</h3>
                <div class="results-container">
                    <ul id="questionListConstructor"></ul>
                </div>
            </div>
        </div>
    </div>
    
    <div id="startInterviewScreen" class="screen">
        <div class="info-screen-content">
            <h2>Инструкция для прохождения</h2>
            <p>
                Вам будет предложено несколько вопросов. После прочтения вопроса 
                нажмите кнопку "Начать ответ", произнесите его, а затем нажмите 
                "Закончить ответ" для оценки.
            </p>
            <p style="font-weight: bold;">
                Нажимая кнопки ниже, вы даете согласие на запись вашего видео и аудио для оценки.
            </p>
            <br>
            <div class="controls" style="flex-direction: column; align-items: center; gap: 20px;">
                <button id="checkDeviceBtn">Проверить камеру и микрофон</button>
                <p id="deviceCheckStatus"></p>
                <button id="startBtn" style="display: none;">Начать тест</button>
            </div>
        </div>
    </div>

    <div id="interviewScreen" class="screen">
        <div class="main-layout">
             <div class="center-column">
                <div class="video-container">
                    <video id="videoPreview" muted autoplay playsinline></video>
                </div>
                <div class="card" style="width: 100%; flex-grow: 0;">
                    <h3>Текущий вопрос</h3>
                    <p id="question"></p>
                </div>
                <div class="controls" style="flex-direction: row; margin-top: 20px;">
                    <button id="recordBtn" disabled>Начать ответ</button>
                </div>
                 <p id="status"></p>
            </div>
            <div class="right-column">
                <h3>Результаты</h3>
                <div class="results-container"><ul id="resultsList"></ul></div>
                <h3 style="margin-top: 20px;">Распознанный ответ:</h3>
                <div class="card" style="min-height: 100px;">
                    <p id="recognitionResult"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="resultsScreen" class="screen">
        <div class="info-screen-content">
            <h2 id="resultTitle"></h2>
            <p id="resultText" style="font-size: 1.2em; margin-bottom: 30px;"></p>
            <div class="controls" style="flex-direction: row; justify-content: center;">
                <button id="saveBtn" style="display: none;">Сохранить запись</button>
                <button id="restartBtn">Создать новый тест</button>
            </div>
        </div>
    </div>
    
    <div id="historySection" style="display: none;">
        <h2>История прохождений</h2>
        <table class="history-table">
            <thead>
                <tr><th>Дата и время</th><th>Результат</th><th>Счет</th></tr>
            </thead>
            <tbody id="historyTableBody"></tbody>
        </table>
    </div>

    <script src="script.js"></script>
</body>
</html>
